---
layout: layouts/content.njk
subsection: Production
showHelp: true
title: Use MoJ Frontend Nunjucks
lede: Use MoJ Frontend Nunjucks code to generate the HTML for pages and components. 
eleventyNavigation:
  key: Use Nunjucks
  parent: Production
  order: 40
  excerpt: "Use MoJ Frontend Nunjucks code to generate the HTML for pages and components. You can also change the HTML that’s generated by passing options into the Nunjucks code."
---

## Overview

If you use Nunjucks, your application will be easier to update when a new version of MoJ Frontend is released.

To use Nunjucks, your application and any frameworks that support your application must use Node.js. You do not need to follow this guidance to [set up coded prototypes using the GOV.UK Prototype Kit](/prototyping/setting-up-coded-prototypes/).

## Before you start

First you need to:

- [install MoJ Frontend with Node.js package manager (npm)](/production/installing-with-npm/)
- make sure you’ve installed Nunjucks so it’s working in your environment

## Set up Nunjucks and use the page template

1. Add both `node_modules/@ministryofjustice/frontend` and `node_modules/govuk-frontend/dist` to your list of Nunjucks paths, so Nunjucks knows where to find templates and components from MoJ Frontend and GOV.UK Frontend.

   For example:

   ```js
   nunjucks.configure([
     'node_modules/@ministryofjustice/frontend',
     'node_modules/govuk-frontend/dist',
     '<YOUR-VIEWS-FOLDER>'
   ]);
   ```

2. Use the MoJ Frontend template by adding the following at the top of your view file:

   ```njk
   {% raw %}
   {% extends "moj/template.njk" %}
   {% endraw %}
   ```

You may need to change the paths in the Nunjucks code to get the CSS, assets and JavaScript working.

Find out how to [change template content](https://design-system.service.gov.uk/styles/page-template/#changing-template-content).

## Adding Nunjucks filters

You will need to install the MoJ Frontend Nunjucks filters to use the [messages](/components/messages/) and [timeline](/components/timeline/) component macros:

1. Import the filters

   ```mjs
   import mojFilters from '@ministryofjustice/frontend/moj/filters/all.js'
   ```

2. Add the filters to your Nunjucks environment

   ```mjs
   for (const [name, filter] of Object.entries(mojFilters())) {
     nunjucksAppEnv.addFilter(name, filter)
   }
   ```

## Adding a component

Go to [any component page](/components/) on the MoJ Design System website, then copy the Nunjucks macro code from the **Nunjucks** tab of any example.

For example, to add the button menu component to your page, copy the code from the **Nunjucks** tab in the first example on the [button menu component page](/components/button-menu/).

## Configuring a component

You can use options to configure how a component looks or behaves.

For example, use the `text` option to configure the text on a [notification badge](/components/notification-badge/):

```njk
{% raw %}
{{ mojNotificationBadge({
  text: "10"
}) }}
{% endraw %}
```

To see the options for a component, go to [any component page](/components/) on the Design System website, select the **Nunjucks** tab of an example, then select **Nunjucks macro options**.

You must sanitise any HTML you pass in to Nunjucks macros you’re using in your live application to protect your website against cross-site scripting (XSS) attacks. You can read more about [XSS](https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#Cross-site_scripting_XSS) on the MDN website.
