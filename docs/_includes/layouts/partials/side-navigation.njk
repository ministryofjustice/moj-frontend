{% from "macros/nav-list-item/macro.njk" import navListItem -%}

{% set buildingPages = collections.all | eleventyNavigation("Building blocks") %}
{% set guidancePages = collections.all | eleventyNavigation("Guidance") %}
{% set communityPages = collections.all | eleventyNavigation("Community") %}
{% set aboutPages = collections.all | eleventyNavigation("About the Design System") %}

<moj-collapsible-nav open-class="app-vertical-nav__item--open" id="building-nav">
  <nav class="app-vertical-nav" aria-labelledby="building-nav-title">
    <h2 class="app-vertical-nav__header" id="building-nav-title">Building blocks</h2>
    <ul class="app-vertical-nav__list">
      {%- for entry in buildingPages %}
        {{ navListItem({
          item: entry,
          page: page,
          parent: eleventyNavigation.parent
        }) }}
      {%- endfor -%}
    </ul>
  </nav>
</moj-collapsible-nav>

<moj-collapsible-nav open-class="app-vertical-nav__item--open" id="guidance-nav">
  <nav class="app-vertical-nav" aria-labelledby="guidance-nav-title">
    <h2 class="app-vertical-nav__header" id="guidance-nav-title">Guidance</h2>
    <ul class="app-vertical-nav__list">
      {%- for entry in guidancePages %}
        {{ navListItem({
          item: entry,
          page: page,
          parent: eleventyNavigation.parent
        }) }}
      {%- endfor -%}
    </ul>
  </nav>
</moj-collapsible-nav>

{% if env.showCommunity %}
<moj-collapsible-nav open-class="app-vertical-nav__item--open" id="building-nav">
  <nav class="app-vertical-nav" aria-labelledby="building-nav-title">
    <h2 class="app-vertical-nav__header" id="building-nav-title">Community</h2>
    <ul class="app-vertical-nav__list">
      {%- for entry in communityPages %}
        {{ navListItem({
          item: entry,
          sortChildrenBy: "key",
          page: page,
          parent: eleventyNavigation.parent
        }) }}
      {%- endfor -%}
    </ul>
  </nav>
</moj-collapsible-nav>
{% endif %}

<moj-collapsible-nav open-class="app-vertical-nav__item--open" id="about-nav">
  <nav class="app-vertical-nav" aria-labelledby="about-nav-title">
    <h2 class="app-vertical-nav__header" id="about-nav-title">About the Design System</h2>
    <ul class="app-vertical-nav__list">
      {%- for entry in aboutPages %}
        {{ navListItem({
          item: entry,
          page: page,
          parent: eleventyNavigation.parent
        }) }}
      {%- endfor -%}
    </ul>
  </nav>
</moj-collapsible-nav>
