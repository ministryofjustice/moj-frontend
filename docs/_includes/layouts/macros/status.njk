{% from "govuk/components/details/macro.njk" import govukDetails %}


{% macro statusLabel(type, status, statusMessage, statusInfo, creatorName, creatorTeam, statusDate) %}
  {% if status %}
    


    {% set statusData = (statusInfo[status] if statusInfo and status in statusInfo else {}) %}

    {% set statusClass = {
      "Official": "govuk-tag--green",
      "To be reviewed": "govuk-tag--orange",
      "Experimental": "govuk-tag",
      "Archived": "govuk-tag--grey"
    }[status] or "" %}
    

  <span class="govuk-tag status-tag {{ statusClass }}">
   <span class="govuk-visually-hidden">Status:</span> {{ status }}
  </span>

  <p class="status-message govuk-!-margin-bottom-2">
    {% if status == 'Experimental' %}
      {% if creatorName and creatorTeam %}
        {{ statusData.statusMessage }} by {{ creatorName }} in {{ creatorTeam }} in {{ statusDate }}.
      {% elif creatorTeam %}
        {{ statusData.statusMessage }} by someone in {{ creatorTeam }} in {{ statusDate }}.
      {% elif creatorName %}
        {{ statusData.statusMessage }} by {{ creatorName }} in {{ statusDate }}.
      {% else %}
        {{ statusData.statusMessage }} by someone in the community in {{ statusDate }}.
      {% endif %}
    {% else %}
      {{ statusData.statusMessage }} {{ statusDate }}.
    {% endif %}
  </p>

  <details class="govuk-details govuk-!-margin-bottom-8">
    <summary class="govuk-details__summary">
      <span class="govuk-details__summary-text">
     {{ statusInfo[status].link 
      | replace('Types', type | capitalize + 's') 
      | replace('types', type | lower + 's') 
      | replace('Type', type | capitalize) 
      | replace('type', type | lower) 
      }}
      </span>
    </summary>
    <div class="govuk-details__text">
      {{ statusInfo[status].linkContent
      | replace('Types', type | capitalize + 's') 
      | replace('types', type | lower + 's') 
      | replace('Type', type | capitalize) 
      | replace('type', type | lower) 
      }}
      <a href="/design-system-statuses">Read about all the Design System statuses</a>.
    </div>
  </details>

  {% endif %}
{% endmacro %}
