{% from "govuk/components/pagination/macro.njk" import govukPagination %}
{% set paginationItems = [] %}

{% if params.items %}
  {%- for item in params.items %}
    {% if item.type === "dots" %}
      {% set paginationItem = {
       "ellipsis": true
      } %}
    {% else %}
      {% set paginationItem = {
      "number": item.text,
      "href": item.href,
      "current": item.selected
      } %}
    {% endif %}
    {% set paginationItems = paginationItems.concat(paginationItem) %}
  {% endfor %}
{% endif %}

<div class="moj-pagination">
  {% if paginationItems | length > 1 %}
    {{ govukPagination({
        items: paginationItems,
        previous: params.previous,
        next: params.next,
        landmarkLabel: params.landmarkLabel,
        classes: "moj-pagination__pagination " + (params.classes if params.classes),
        attributes: params.attributes
      })
    }}
  {% endif %}

  {%- if params.results %}
    {% set results_string = '' %}
    {% set results_term = params.results.text | default("results") %}

    {% if paginationItems | length > 0 %}
      {% if params.results.pages.current and params.results.pages.count %}
        {% set results_string = "Page " + params.results.pages.current  + " of " + params.results.pages.count %}
      {% elif params.results.from and params.results.to  %}
        {% if params.results.count %}
          {% set results_string = "Showing " + params.results.from  + " to " + params.results.to + " of " + params.results.count + " " + results_term %}
        {% else %}
          {% set results_string = "Showing " + results_term + " " + params.results.from  + " to " + params.results.to %}
        {% endif %}
      {% elif params.results.count %}
        {% set results_string = params.results.count + " total " + results_term %}
      {% endif %}
    {% else %}
      {% if params.results.count %}
        {% set results_string = params.results.count + " " + results_term %}
      {% endif %}
    {% endif %}

    {% if results_string != '' %}
      <p class="moj-pagination__results">{{ results_string }}</p>
    {% endif %}
  {% endif -%}
</div>
